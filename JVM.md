<h1 align = "center">
    JVM
</h1>

## 1.类加载

### 类加载过程:

#### 1:加载

通过一个类的全限定明来获取定义该类的二进制字节流

将字节流所嗲表的静态存储结构转化为方法去的运行时的数据结构

在内存中生成一个代表该类的Class对象，作为方法区这个类的各种数据的访问入口

**jvm规范所规定的  *有且仅有*  的5种必须执行  *初始化*  的情况：**

1. new、getstatic、putstatic、invokestatic这四个字节码指令时，如果类没有进行过初始化，则需要先触发其初始化；new对应使用new关键字实例化对象；getstatic/putstatic对应读取或设置一个类属性时(被final修饰、或者已经在编译器放入到常量池中的静态字段除外)；invokestatic对应调用一个类的静态方法

2. 使用java.lang.reflect包下的方法对类进行反射调用的时候

3. 当初始化一个类的时候，发现他的父类还没有进行过初始化，则对父类进行初始化

4. 当虚拟机(JVM)启动时,用户需要指定一个要执行的主类(包含main()),虚拟机会先初始化这个主类

5. 使用动态语言支持(JDK1.7)时,如果一个java.lang.invoke.MethdoHandle实例最后的解析结果REF_getstatic、

   REF_putstatic、REF_invokeStatic的方法句柄，并且这个句柄所对应的类没有进行过初始化，则先出发其初始化

**以上五种   *有且仅有*   的初始化情况被称为对一个类进行  *主动引用*  ,除此之外的所有引用类的方法都不会触发初始化，这种情况叫做   *被动引用***

三种常见的被动引用的情况:

1. 通过

#### 2:连接

##### 	2.1:**验证**

验证Class文件的字节流中包含的信息是否符合当前虚拟机的要求，并且不会危害虚拟机自身的安全

1. **文件格式验证**

   是对字节流的操作，目的是为了保证输入的字节流能正确解析并存储于方法区之内，格式上满足描述Java类型信息的要求

2. **元数据验证**:

   对字节码描述的信息进行语义分析（主要对类的元数据信息进行语义校验），来保证描述的信息符合Java语言规范(保证不存在不符合Java语言规范的元数据信息)

   可能验证的东西:

   - 是否有父类(除java.lang.Object)

   - 是否继承了被final修饰的类(不允许被继承)

   - 该类是不是抽象类，实现类是否实现了父类和接口之中所有要求实现的方法

   - 类中的字段、方法是否与父类产生矛盾(如覆盖父类final字段，出现不符合规则的重载:参数一直，但是返回值类型不一致)

3. **字节码验证**:

   该阶段是整个验证过程中最复炸的一个阶段，主要目的是通过数据流和控制流分析，确定程序语义是合法的、符合逻辑的；当元数据校验完成后，该阶段将对类的方法体进行校验分析，保证被校验的类的方法在运行时不会做出危害虚拟机的安全事件。

4. **符号引用验证**:

##### 	2.2:**准备**

##### 	2.3:**解析**

#### 3:初始化

